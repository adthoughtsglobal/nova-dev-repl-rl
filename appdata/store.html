<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<meta name="nova-include" content="nova.css material-symbols-rounded">
	<meta name="capabilities" content="content_store">
    <meta name="permissions" content="fileSet, settings, fileGet, unsandboxed">
	<meta name="nova-icon"
		content="<svg width='232' height='232' viewBox='0 0 232 232' fill='none' xmlns='http://www.w3.org/2000/svg'> <g clip-path='url(#clip0_0_1)'> <rect y='47' width='232' height='185' rx='40' fill='#384AAE'/> <rect y='71' width='232' height='161' rx='40' fill='#6179FF'/> <path d='M189 105C189 51.9807 156.093 9 115.5 9C74.9071 9 42 51.9807 42 105' stroke='#6179FF' stroke-width='18'/> <path d='M92.3167 143.277C93.4444 140.963 94.6125 138.732 95.8208 136.583C97.0292 134.435 98.3583 132.286 99.8083 130.138L93.0417 128.774L82.8917 139.186L92.3167 143.277ZM150.558 109.189C144.919 109.354 138.898 111.048 132.494 114.271C126.09 117.494 120.269 121.791 115.033 127.163C111.65 130.633 108.629 134.352 105.971 138.319C103.312 142.285 101.339 146.004 100.05 149.475L113.825 163.482C117.208 162.16 120.833 160.135 124.7 157.408C128.567 154.681 132.192 151.582 135.575 148.111C140.811 142.74 145 136.79 148.142 130.261C151.283 123.733 152.935 117.576 153.096 111.792C153.096 111.461 153.035 111.131 152.915 110.8C152.794 110.469 152.612 110.18 152.371 109.932C152.129 109.684 151.847 109.498 151.525 109.374C151.203 109.251 150.881 109.189 150.558 109.189ZM123.975 138.939C122.122 137.038 121.196 134.703 121.196 131.935C121.196 129.166 122.122 126.832 123.975 124.931C125.828 123.031 128.124 122.08 130.862 122.08C133.601 122.08 135.897 123.031 137.75 124.931C139.603 126.832 140.529 129.166 140.529 131.935C140.529 134.703 139.603 137.038 137.75 138.939C135.897 140.839 133.601 141.79 130.862 141.79C128.124 141.79 125.828 140.839 123.975 138.939ZM119.867 171.416L123.854 181.208L134.004 170.796L132.675 163.854C130.581 165.342 128.486 166.685 126.392 167.883C124.297 169.081 122.122 170.259 119.867 171.416ZM162.279 105.222C162.924 114.312 161.474 123.175 157.929 131.811C154.385 140.447 148.786 148.69 141.133 156.541L143.55 168.813C143.872 170.465 143.792 172.077 143.308 173.647C142.825 175.217 142.019 176.581 140.892 177.738L125.667 193.356C124.458 194.596 123.008 195.071 121.317 194.782C119.625 194.493 118.457 193.522 117.812 191.869L110.442 174.143L89.7792 152.946L72.5 145.384C70.8889 144.723 69.9222 143.525 69.6 141.79C69.2778 140.054 69.7208 138.567 70.9292 137.327L86.1542 121.708C87.2819 120.551 88.6312 119.725 90.2021 119.229C91.7729 118.733 93.3639 118.651 94.975 118.981L106.937 121.46C114.59 113.61 122.626 107.866 131.044 104.23C139.462 100.594 148.101 99.1066 156.962 99.7677C157.607 99.8503 158.251 100.036 158.896 100.326C159.54 100.615 160.104 101.007 160.587 101.503C161.071 101.999 161.453 102.577 161.735 103.239C162.017 103.9 162.199 104.561 162.279 105.222ZM76.9708 166.209C79.7903 163.317 83.234 161.85 87.3021 161.809C91.3701 161.768 94.8139 163.193 97.6333 166.085C100.453 168.978 101.842 172.511 101.802 176.684C101.762 180.857 100.332 184.39 97.5125 187.282C93.6458 191.249 89.0743 193.604 83.7979 194.348C78.5215 195.092 73.225 195.835 67.9083 196.579C68.6333 191.125 69.3583 185.691 70.0833 180.279C70.8083 174.866 73.1042 170.176 76.9708 166.209ZM83.8583 173.151C82.4889 174.556 81.5424 176.25 81.0187 178.233C80.4951 180.217 80.0722 182.241 79.75 184.307C81.7639 183.977 83.7375 183.564 85.6708 183.068C87.6042 182.572 89.2556 181.622 90.625 180.217C91.5917 179.225 92.1153 178.027 92.1958 176.622C92.2764 175.217 91.8333 174.019 90.8667 173.027C89.9 172.035 88.7319 171.56 87.3625 171.602C85.9931 171.643 84.825 172.159 83.8583 173.151Z' fill='#9CABFF'/> </g> <defs> <clipPath id='clip0_0_1'> <rect width='232' height='232' fill='white'/> </clipPath> </defs> </svg>">
	<title>store</title>
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
	<style>
		html {
			height: 100%;
			width: 100%;
		}

		body {
			margin: 0;
			padding-bottom: 10px;
		}

		.mains {
			padding-top: 0;
		}

		div,
		dialog {
			animation: up .2s;
		}

		.containdiv {
			animation: up2 .5s;
		}

		@keyframes up {
			from {
				opacity: 0;
			}

			to {
				opacity: 1;
			}
		}

		@keyframes up2 {
			from {
				opacity: 0;
				transform: translateY(5px);
			}

			to {
				opacity: 1;
				transform: none;
			}
		}

		.sewid {
			display: flex;
			border-radius: 10px;
			padding-left: 0.3rem;
			animation: inputslide .3s ease-out;
			transition: .3s ease-out;
		}

		#topse {
			background: var(--col-bg3);
		}

		@keyframes inputslide {
			0% {
				opacity: 0;
			}

			100% {
				opacity: 1;
			}
		}

		#topse input {
			flex-grow: 1;
			border: none;
			font-size: var(--font-size-normal);
			outline: none;
			text-overflow: ellipsis;
			color: var(--col-txt1);
			background-color: transparent;
			border-radius: 0.5rem;
			width: 38vw;
		}

		#topse button {
			border-radius: 7px;
			border: none;
			cursor: pointer;
			transition: .2s;
			color: #dce9fc;
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 0.5rem;
		}

		.installbtnicn {
			font-size: 1.3rem !important;
		}

		small {
			margin-left: 13px;
			display: inline-block;
		}

		.app {
			padding: 4px 9px;
			animation: fa 0.5s;
			border-radius: 11px;
			box-shadow: 0 14px 0px -10px inset limegreen;
			padding-top: 12px;
			background: var(--col-bg2);
			color: var(--col-txt1);
			border: 1px solid #ffffff1c;
			display: flex;
			margin: 10px;
			flex: 1;
			min-width: 118px;
			transition: .2s;
			user-select: none;
			cursor: pointer;
			margin-left: 0px;
			padding-bottom: 16px;
			flex-direction: column;
			flex-wrap: wrap;
		}

		.app:hover {
			box-shadow: 0 0 10px #121212;
			filter: brightness(110%);
			background-color: var(--col-bg3);
		}

		.app h3 {
			margin: 10px 0px;
			margin-bottom: 1px;
			font-weight: normal;
			font-size: var(--font-size-subheading);
		}

		.app .appfes {
			display: inline-block;
		}

		.app .appfes div {
			display: inline-block;
			font-size: var(--font-size-small);
			border: none;
			opacity: 0.5;
			max-width: 81px;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.dostuffwithit {
			display: inline-flex;
			width: fit-content;
			align-items: center;
			justify-content: center;
			gap: 0.3rem;
		}

		.insbtn {
			flex: 1;
			width: 100%;
			margin: 3px 0px;
			border-radius: 5px;
			padding: 5px;
			transition: .5s;
			cursor: pointer;
			background: #43A047;
			border: none;
			color: #ffffff;
		}

		.section {
			padding: 0;
			padding-left: 10px;
			align-items: stretch;
			justify-content: flex-start;
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
		}

		#defapppack {
			margin: 10px 0;
			white-space: normal;
			padding: 0;
			padding-left: 10px;
			justify-content: flex-start;
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(134px, 1fr));
		}

		nav {
			padding: 10px;
			margin-bottom: 18px;
			background-color: #232424;
			display: block;
			text-align: left;
			opacity: 80%;
		}

		.srca {
			opacity: 0.5;
			margin-top: 1em;
			display: block;
			font-size: var(--font-size-small);
		}

		.catonappdiv {
			display: inline-block;
			font-size: var(--font-size-small) !important;
			opacity: 0.5;
			transform: translateY(-2px);
			margin-left: 3px;
		}

		.app p {
			height: 61px;
			width: 80%;
			overflow: hidden;
			word-wrap: break-word;
			line-height: 1.25;
			font-size: var(--font-size-normal);
			border-radius: 5px;
			white-space: normal;
			text-overflow: ellipsis;
			display: -webkit-box;
			-webkit-line-clamp: 2;
			-webkit-box-orient: vertical;
		}

		.loader {
			width: 80px;
			height: 42px;
			display: block;
			margin: auto;
			padding: 0 8px;
			box-sizing: border-box;
			background: linear-gradient(#323232 0 0) 10% 0/4px 20px, linear-gradient(#323232 0 0) 70% 0/4px 20px, radial-gradient(farthest-side, #83ff8c 90%, #0000) 7% 5px/8px 8px content-box, #0000;
			background-repeat: no-repeat;
			animation: l3 2s infinite cubic-bezier(0, 0, 0.26, 0.65);
		}

		@keyframes l3 {
			25% {
				background-position: 0 0, 100% 100%, 100% calc(100% - 5px)
			}

			50% {
				background-position: 0 100%, 100% 100%, 0 calc(100% - 5px)
			}

			75% {
				background-position: 0 100%, 100% 0, 100% 5px
			}
		}

		@keyframes fa {
			0% {
				opacity: 0;
				transform: translateY(-10px);
			}

			75% {
				opacity: 0.7;
				transform: translateY(5px);
			}

			75% {
				opacity: 1;
				transform: translateY(0px);
			}
		}

		.quote {
			padding: 10px;
			border-radius: 7px;
			width: calc(100% - 22px);
			word-wrap: break-word;
			margin-top: 5px;
			border: 1px solid #414141;
			text-align: center;
		}

		#featured {
			border-radius: 10px;
			overflow: hidden;
			margin: 10px;
			background: var(--col-bg2);
			border: 1px solid #ffffff1c;
			padding: 9px;
			display: flex;
			flex-direction: row;
			gap: 0.8rem;
			max-height: 300px;
		}

		#featured h1 {
			margin: 0;
			margin-bottom: 10px;
		}

		#featured button {
			background: var(--col-bgh);
			border: none;
			color: var(--col-txth);
			padding: 0.5rem 1rem;
			border-radius: 5px;
			display: flex;
			align-items: center;
			flex-direction: row;
			width: fit-content;
		}

		img#featuredImg {
			object-fit: cover;
			flex: 1;
			width: 0;
		}

		#featuredcontent {
			flex: 1;
		}

		#installer {
			width: 100%;
			height: 100%;
			border: none;
			padding: 20px;
			background: var(--col-bg1);
			color: var(--col-txt1);
		}

		.containdiv {
			max-width: 500px;
			margin: auto;
		}

		#installer nav {
			background: none;
			padding: 0;
		}

		#installer h1 {
			display: inline-block;
			width: calc(100% - 110px);
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			width: 0;
			flex: 1;
			margin-bottom: 0.3rem;
		}

		#installer button {
			float: right;
			padding: 5px 15px;
			border: none;
			background: #43A047;
			color: var(--col-txt1);
			outline: 0;
			border-radius: 4px;
			width: fit-content;
			cursor: pointer;
			font-family: inherit;
		}

		#installer button:hover {
			background-color: var(--col-bg3);
		}

		.installerappbasedata {
			display: flex;
			flex-direction: row;
		}

		.dostuffwithit button {
			background-color: #43A047 !important;
		}

		.dostuffwithit button:hover {
			background-color: #3c933c;
		}

		.insbtn:hover {
			background-color: #378537;
		}

		#apptheme {
			display: grid;
			width: 100%;
			justify-content: center;
			align-items: center;
			justify-items: center;
			padding: 1rem 0;
			font-size: var(--font-size-subheading);
			background: var(--col-bg2);
			border-radius: 5px;
			text-shadow: 0 0 10px BLACK;
		}

		#installer #installerappby {
			display: block;
			opacity: 0.7;
			margin-bottom: 10px;
			font-weight: normal;
		}

		#installer p button {
			float: none;
			background: var(--col-bgh);
		}

		nav .material-symbols-rounded {
			width: 21px;
			transform: translate(-2px, 7px) scale(0.8);
			display: inline-block;

		}

		nav b {
			cursor: pointer;
		}

		#installerappdesc {
			margin: 2px 0;
		}

		.deapp {
			display: inline-flex;
			padding: 7px 11px;
			background: var(--col-bg2);
			margin: 5px;
			transition: .2s;
			cursor: pointer;
			border-radius: 0.5rem;
			justify-content: flex-start;
			align-items: center;
			gap: 0.3rem;
			;
		}

		.deapp:hover {
			filter: brightness(110%);
			transform: scale(1.05);
		}

		.fade {
			transition: opacity 0.5s ease-in-out;
			opacity: 1;
		}

		.fade.hidden {
			opacity: 0;
		}

		.defappcol {
			width: 1rem;
			aspect-ratio: 1 / 1;
			background-color: #378537;
			display: inline-block;
			border-radius: 0.3rem;
		}

		a.farright {
			opacity: 0.5;
			display: flex;
			align-items: center;
			background: #1f1f1f;
			border-radius: 0.5rem;
			padding: 0.3rem 0.5rem;
			gap: 0.3rem;
			font-size: small;
		}

		a.farright i {
			font-size: 1rem;
		}

		.minisecnav {
			display: flex;
			align-items: center;
			justify-content: flex-start;
			gap: 0.5rem;
			font-size: 1rem;
			margin-top: 1rem;
		}

		.resultapp {
			display: flex;
			align-items: flex-start;
			justify-content: space-between;
			flex-direction: row;
			padding: 0.7rem;
			background: var(--col-bg2);
			margin: 0 1rem;
			border-radius: 0.5rem;
			margin-bottom: 0.3rem;
		}

		.resultapp:hover {
			background-color: var(--col-bg3);
		}

		.resultapp b,
		.resultapp p {
			margin: 0;
			font-weight: normal;
		}

		.resultapp p {
			opacity: 0.5;
		}

		.resultapp b {
			font-size: var(--font-size-subheading);
		}

		.resultapp .chevronbtn {
			background-color: var(--col-bgh);
			border: 0;
			border-radius: 0.5rem;
			color: var(--col-txt1);
			outline: none;
			aspect-ratio: 1 / 1;
			display: flex;
			align-items: center;
		}

		#searchresults {
			margin-bottom: 1rem;
			max-height: 193px;
			overflow-y: auto;
			display: none;
		}

		.searchnores {
			text-align: center;
			opacity: .5;
		}

		.nav {
			display: flex;
			margin: 0 auto;
			width: fit-content;
			margin-bottom: 0.5rem;
			gap: .5rem;
			background: var(--col-bg2);
			border-radius: 0.5rem;
			padding: 0.3rem;
		}

		.nav button[active="true"] {
			background: var(--col-bg3);
		}

		.nav button {
			background: transparent;
			color: inherit;
			border-radius: 0.5rem;
			border: 0;
		}

		#themeslist {
			display: flex;
			flex-direction: row;
			gap: 0.5rem;
			margin: 1rem;

			justify-content: flex-start;
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(134px, 1fr))
		}

		.themecolorssing {
			width: 0;
			flex: 1;
			height: 20px;
		}

		.themesing {
			background-color: var(--col-bg2);
			padding: 0.5rem;
			border-radius: 0.5rem;
			text-overflow: ellipsis;
			white-space: break-spaces;
			overflow: hidden;
			display: flex;
			flex-direction: column;
			transition: .2s ease-out;
			gap: 0.5rem;
		}

		.themesing:hover {
			transform: scale(1.2);
			z-index: 99;
			font-size: 70%;
			box-shadow: 0 5px 10px #000000;
		}

		.themeinfodiv {
			display: flex;
			align-items: flex-start;
			justify-content: space-between;
			gap: 0.3rem;
			flex-direction: column;
			width: 0;
			flex: 1;
			overflow-x: hidden;
		}

		.themedetdiv {
			display: flex;
			align-items: flex-start;
			justify-content: space-between;
			flex-direction: row;
			gap: 0.5rem;
		}

		.themedetdiv button {
			display: flex;
			border: 0;

			background-color: var(--col-good);
			color: var(--col-txth);
			padding: 0.3rem;
			border-radius: 0.5rem;
		}

		.themecolors {
			display: flex;
			flex-direction: row;
			flex-wrap: nowrap;
			background-size: cover !important;
			background-position: center !important;
			border-radius: 0.5rem;
		}

		.openablewin {
			display: none;
		}

		path,
		svg {
			border-radius: 0.5rem;
			height: fit-content;
		}

		.themename {
			flex: 1;
			text-overflow: ellipsis;
		}

		.themeauth {
			opacity: 0.5;
			font-size: .8em;
		}

		#offlinesug {
			position: absolute;
			top: 0;
			left: 0;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			width: 100%;
			height: 100%;
			background: var(--col-bg1);
			z-index: 99;
		}

		#offlinesug code {
			background-color: var(--col-bg2);
			padding: .5em .7em;
			border-radius: .77em;
			color: grey;
			width: 300px;
			font-size: small;
		}

		#themenavsel button.active-filter {
			background-color: var(--col-bgh);
			color: var(--col-txth);
		}

		#themenavsel {
			gap: .3em;
			display: none;
		}

		#themenavsel button {
			background-color: var(--col-bg2);
			color: inherit;
			font-family: inherit;
			border: 1px solid #ffffff1c;
			border-radius: .5em;
			padding: .2em .8em;
		}

		.divider {
			background-color: var(--col-bg3);
			width: 1px;
		}

		#offlinesug {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			height: 100vh;
			overflow: hidden;
		}

		.glitchbtn {
			margin-top: 1em;
    padding: .5em 1em;
    font-size: inherit;
    border-radius: var(--siz-radius1);
    border: 0;
    background-color: var(--col-bgh);
    color: inherit;
		}

		.initloadin {
			filter: contrast(0);
			opacity: .1;
		}
	</style>
</head>

<body class="initloadin">
	<div class="nav">
		<button active="true" onclick="openwin('appsmode', this)">
			Apps
		</button>
		<button id="themesmodebtn" onclick="openwin('themesmode', this)">
			Themes
		</button>
		<div class="divider"></div>
		<div id="topse" class="sewid">
			<input placeholder="Search or enter link" id="fesinp" onkeydown="handleEnterKey(event)"
				oninput="updateButtonText()">
			<button id="actionButton" onclick="handleSearchOrInstall(this)">
				<div class="material-symbols-rounded installbtnicn">download</div>
			</button>
		</div>

		<div id="themenavsel" class="sewid">
			<button data-filter="Dark">Dark</button>
			<button data-filter="Light">Light</button>
			<button data-filter="Nova">Nova</button>
			<button data-filter="Accelerator">Accelerator</button>
		</div>
	</div>
	<div class="mains">
		<div id="searchresults"></div>
		<div id="appsmode" class="openablewin">
			<div id="featured">
				<img id="featuredImg" src="https://i.ibb.co/j9Ycj5Y5/image.png">
				<div id="featuredcontent">
					<h1 id="featuredappname">App name</h1>
					<span class="appby" id="featuredappby">App author</span>
					<p id="featuredappdesc">App description</p>
					<button id="featuredappcta"><span>View</span><i
							class="material-symbols-rounded">arrow_forward</i></button>
				</div>
			</div>
			<div id="sugapps">
				:( unexpected error
			</div>

			<small class="minisecnav">Default Apps <a class="farright"><i class="material-symbols-rounded">info</i>click
					to update</a></small>
			<div id="defapppack">
			</div>

		</div>
		<div id="themesmode" class="openablewin">

			<div id="themeslist"></div>
			<script>
				const activeFilters = new Set();

				document.querySelectorAll('#themenavsel button').forEach(button => {
					button.addEventListener('click', () => {
						const filter = button.getAttribute('data-filter');
						if (activeFilters.has(filter)) {
							activeFilters.delete(filter);
							button.classList.remove('active-filter');
						} else {
							activeFilters.add(filter);
							button.classList.add('active-filter');
						}
						loadThemes();
					});
				});

				function displayErrorMessage(message, error) {
					let ele = document.createElement("div");
					if (!message) {
						message = "<p>Failed to fetch data. Please try again.</p><code>" + error + "</code> <button class='glitchbtn' onclick='greenflag()'>Retry</button>";
					}
					console.log("err")
					ele.id = "offlinesug";
					ele.innerHTML = message;
					document.body.appendChild(ele);
				}

				function openwin(winname, obj) {
					if (winname == "appsmode") {
						renderapps()
						document.getElementById("topse").style.display = 'flex';
						document.getElementById("themenavsel").style.display = 'none';
					} else {
						loadThemes()
						document.getElementById("topse").style.display = 'none';
						document.getElementById("themenavsel").style.display = 'flex';
					}
					document.querySelectorAll("[active]").forEach((x) => {
						x.setAttribute("active", "false");
					});

					obj.setAttribute("active", 'true');
					const elements = document.getElementsByClassName("openablewin");
					for (let i = 0; i < elements.length; i++) {
						elements[i].style.display = 'none';
					}

					document.getElementById(winname).style.display = 'block';
				}
				const elements = document.getElementsByClassName("openablewin");
				for (let i = 0; i < elements.length; i++) {
					elements[i].style.display = 'none';
				}
				document.getElementById('appsmode').style.display = 'block';

				var networkretries = 0;
				function loadThemes() {
					const container = document.getElementById("themeslist");

					fetch('https://adthoughtsglobal.github.io/Nova-Store/db/themes.json')
						.then(response => response.json())
						.then(data => {
							container.innerHTML = '';

							Object.entries(data).forEach(([themeName, themeData]) => {
								const themeContainer = document.createElement('div');
								themeContainer.classList.add("themesing");
								themeContainer.style.border = `1px solid ${themeData.colors["--col-bg3"]}`;

								themeContainer.style.background = `linear-gradient(to bottom right, 
								${themeData.colors["--col-bg1"]} 0%, 
								${themeData.colors["--col-bg3"]} 25%, 
								${themeData.colors["--col-bg2"]} 75%, 
								${themeData.colors["--col-bgh"]}) 100%`;
								themeContainer.style.color = themeData.colors["--col-txt1"];

								const colorsSvg = document.createElement('div');
								colorsSvg.style.background = themeData.wallpaper
									? `url("${themeData.wallpaper}")`
									: themeData.colors["--col-bg1"];

								colorsSvg.classList.add('themecolors');
								const svgNS = "http://www.w3.org/2000/svg";

								const colorsubbg = themeData.colors["--col-bg3"] || "#080808";
								const colorsectionbg = themeData.colors["--col-bg2"] || "#090909";
								const colorhighlight = themeData.colors["--col-bgh"] || "#512DA8";
								const colorwhite = themeData.colors["--col-txth"] || "#FFFFFF";
								const colortext = themeData.colors["--col-txt1"] || "#FFFFFF";
								const colorgood = themeData.colors["--col-good"] || "#49AC49";
								const colorbad = themeData.colors["--col-bad"] || "#AC4949";

								const svg = document.createElementNS(svgNS, 'svg');
								svg.setAttribute('version', '1.1');
								svg.setAttribute('xmlns', svgNS);
								svg.setAttribute('width', '186.92934');
								svg.setAttribute('height', '127.61522');
								svg.setAttribute('viewBox', '0 0 186.92934 127.61522');

								const g1 = document.createElementNS(svgNS, 'g');
								g1.setAttribute('transform', 'translate(-146.53533,-116.19239)');

								const g2 = document.createElementNS(svgNS, 'g');
								g2.setAttribute('stroke', 'none');
								g2.setAttribute('stroke-width', 'none');
								g2.setAttribute('stroke-miterlimit', '10');

								const paths = [
									{ d: "M153.33273,232.60246v-110.0906h50v110.0906z", fill: colorsectionbg }, // card section
									{ d: "M153.33273,232.60246v-110.0906h117.15993v110.0906z", fill: colorsectionbg },
									{ d: "M165.64709,197.15912v-13.89422h54.10463v13.89422z", fill: colorhighlight }, // button
									{ d: "M165.75792,153.04796v-16.07118h38.50194v16.07118z", fill: colortext },
									{ d: "M165.44056,166.29708v-8.03559h92.94427v8.03559z", fill: colortext },
									{ d: "M165.44056,176.68927v-8.03559h74.55944v8.03559z", fill: colortext },
									{ d: "M173.17094,193.3994v-6.37479h39.05692v6.37479z", fill: colorgood },
									{ d: "M173.17094,193.3994v-6.37479h39.05692v6.37479z", fill: colorwhite }
								];

								paths.forEach(({ d, fill }) => {
									const path = document.createElementNS(svgNS, 'path');
									path.setAttribute('d', d);
									path.setAttribute('fill', fill);
									path.setAttribute('rx', '10');
									g2.appendChild(path);
								});

								g1.appendChild(g2);
								svg.appendChild(g1);
								colorsSvg.appendChild(svg);

								const by = themeData.by || 'NovaOS';
								const name = themeName.toLowerCase();

								let showTheme = true;

								if (activeFilters.size > 0) {
									showTheme = true;
									if (activeFilters.has('Nova') && (by != "NovaOS")) {
										showTheme = false;
									}
									if (activeFilters.has('Accelerator') && by !== 'un4ya.1024') {
										showTheme = false;
									}
									if (activeFilters.has('Dark') && themeData.type !== 'dark') {
										showTheme = false;
									}
									if (activeFilters.has('Light') && themeData.type !== 'bright') {
										showTheme = false;
									}
								}


								if (!showTheme) return;

								const themedetdiv = document.createElement('div');
								themedetdiv.classList.add('themedetdiv');

								const infoDiv = document.createElement('div');
								infoDiv.classList.add('themeinfodiv');


								const nameDiv = document.createElement('div');
								nameDiv.classList.add("themename")
								nameDiv.innerText = themeName;
								infoDiv.appendChild(nameDiv);

								themeData.by = themeData.by || 'NovaOS';
								const authdiv = document.createElement('div');
								authdiv.classList.add("themeauth")
								authdiv.innerText = themeData.by;
								infoDiv.appendChild(authdiv);

								themedetdiv.appendChild(infoDiv);

								const instdiv = document.createElement('button');
								instdiv.style.background = themeData.colors["--col-bgh"];
								instdiv.style.color = themeData.colors["--col-txth"];
								instdiv.style.border = `1px solid ${themeData.colors["--col-bg3"]}`; instdiv.style.borderRadius = themeData.colors["--siz-radius1"]
								instdiv.innerHTML = `<i
						class="material-symbols-rounded">format_paint</i>`;
								themedetdiv.appendChild(instdiv);

								themeContainer.appendChild(colorsSvg);
								themeContainer.appendChild(themedetdiv);

								themeContainer.addEventListener('click', async () => {
									await window.parent.applyThemeNonVisual(themeData, document);
									ntxSession.send("sysUI.toast",`Theme pack "${themeName}" applied.`)
								});
								container.appendChild(themeContainer);
							});


						})
						.catch((error) => {
							networkretries++;
							console.error('Error loading themes:', error);
							if (networkretries > 2) {
								displayErrorMessage("<p>Failed to fetch data. Please try opening the app again.</p><code>", error);
							} else {
								loadThemes();
							}

						});
				}
			</script>
		</div>
	</div>

	</div>
	<script src="https://cdn.jsdelivr.net/npm/tinycolor2"></script>


	<dialog id="installer">
		<div class="containdiv">
			<nav>
				<b onclick="document.getElementById('installer').close()"><i
						class="material-symbols-rounded">arrow_back</i>
					Back</b>
			</nav>
			<div id="apptheme">
				Theme
			</div>
			<div class="installerappbasedata">
				<h1 id="installerappname">Loading...</h1>
				<div class="dostuffwithit">
					<button id="openbtn">Open</button>
					<button id="installButton">...</button>
				</div>
			</div>
			<b id="installerappby">...</b>
			<b>Overview</b>
			<p id="installerappdesc">...</p>
		</div>
	</dialog>
	<script defer>
		function getAppNameFromUrl(url) {
			let hostname = new URL(url).hostname;
			hostname = hostname.replace(/^www\./, '');
			let parts = hostname.split('.');
			return parts[0].charAt(0).toUpperCase() + parts[0].slice(1);
		}

		async function installapp(x, appName, obj, method = "icononly") {
			let prefixurl = "";
			if (!x.src.startsWith("http")) {
				prefixurl = "https://adthoughtsglobal.github.io/"
			}
			try {
				if (method == 'icononly') {
					obj.innerHTML = `<div class="material-symbols-rounded installbtnicn">pending</div>`
				} else {
					obj.innerHTML = `Checking...`
				}
				const response = await fetch(prefixurl + x.src);
				const content = await response.text();
				await window.parent.createFile("Apps", appName, "app", content);
				setTimeout(() => {
					if (method == 'icononly') {
						obj.innerHTML = `<div class="material-symbols-rounded installbtnicn">check</div>`;
						setTimeout(() => {
							obj.innerHTML = `<div class="material-symbols-rounded installbtnicn">download</div>`
						}, 1000)
					} else {
						obj.innerHTML = `Update`
					}
				}, 1000)
			} catch (err) {
				setTimeout(() => {
					if (method == 'icononly') {
						obj.innerHTML = `<div class="material-symbols-rounded installbtnicn">sentiment_dissatisfied</div>`;
						setTimeout(() => {
							obj.innerHTML = `<div class="material-symbols-rounded installbtnicn">download</div>`
						}, 1000)
					} else {
						obj.innerHTML = "Failed";
						setTimeout(() => {
							obj.innerHTML = "Update";
						}, 1000)
					}
				}, 1000)
			}

		}

		function renderapps() {
			fetchAppData().then(appData => {
				document.getElementById("offlinesug")?.remove();
				document.body.classList.remove("initloadin");
				renderSections();
				populateApps(appData);
				populateDefaultApps(window.parent.defAppsList);
			}).catch(error => {
				displayErrorMessage(0, error);
				console.error('Error:', error);
				return;
			});
		}
		async function greenflag() {
			const data = myWindow?.params?.data?.opener;

			if (data == 'themes') {
				openwin('themesmode', document.getElementById('themesmodebtn'));
				document.body.classList.remove("initloadin");
				return;
			}

			renderapps()
		}

		async function fetchAppData() {
			return await fetch('https://adthoughtsglobal.github.io/Nova-Store/db/database.json')
				.then(response => {
					if (!response.ok) throw new Error('Network response was not ok');
					return response.json();
				});
		}

		function renderSections() {
			document.getElementById("sugapps").innerHTML = `
        <small>For NovaOS</small>
        <div id="nova-section" class="section"></div>
        <small>Apps</small>
        <div id="apps-section" class="section"></div>`;
		}

		async function populateApps(data) {
			const vdevs = data.vdevs;
			const featured = data.featured;

			data.data.sort((a, b) => Object.keys(a)[0].localeCompare(Object.keys(b)[0]));

			data.data.forEach(appDetails => {
				const appName = appDetails.name;

				const appDiv = createAppDiv(appName, appDetails, vdevs, featured);

				if (featured.appName == appName) {
					document.getElementById("featuredappname").innerText = appName;
					document.getElementById("featuredappby").innerText = appDetails.by;
					document.getElementById("featuredappdesc").innerText = appDetails.ldesc;
					document.getElementById("featuredImg").src = featured.img;
					document.getElementById("featured").setAttribute("onclick", `openappinstr('${appName}', ${JSON.stringify(appDetails)})`);
					document.getElementById("featured").style.backgroundImage = `radial-gradient(circle at 0% 0%, ${appDetails.th}, var(--col-bg2))`;
				} else if (appDetails.by === "adthoughtsglobal") {
					document.getElementById("nova-section").appendChild(appDiv);
				} else {
					document.getElementById("apps-section").appendChild(appDiv);
				}
			});
		}

		function createAppDiv(appName, appDetails, vdevs, featured) {
			const appDiv = document.createElement('div');
			appDiv.className = 'app';
			appDiv.setAttribute("onclick", `openappinstr('${appName}', ${JSON.stringify(appDetails)})`);

			appDiv.style.boxShadow = `0 14px 0px -10px inset ${appDetails.th}`;
			const appfesDiv = document.createElement('div');
			appfesDiv.className = 'appfes';
			appfesDiv.id = "appfes-" + appName;

			const h3 = document.createElement('h3');
			h3.textContent = appName;
			appfesDiv.appendChild(h3);

			const appInfoDiv = document.createElement('div');
			appInfoDiv.textContent = appDetails.by;
			appfesDiv.appendChild(appInfoDiv);

			const cat = document.createElement('div');
			cat.setAttribute("class", "material-symbols-rounded catonappdiv");
			cat.textContent = vdevs.includes(appInfoDiv.textContent) ? "verified " : "";
			cat.textContent += appDetails.cat === "game" ? "sports_esports" : "widgets";
			appfesDiv.appendChild(cat);

			appDiv.appendChild(appfesDiv);

			const p = document.createElement('p');
			const appDescItem = appDetails.desc;
			p.textContent = appDescItem ? appDescItem : 'Free NovaOS application.';
			appDiv.appendChild(p);

			return appDiv;
		}

		function populateDefaultApps(defaultApps) {
			defaultApps.forEach(appName => {
				const appDiv = document.createElement('div');
				appDiv.id = "appdiv" + window.parent.genUID();
				appDiv.className = 'deapp';
				appDiv.innerHTML = `<span class='defappcol' style='background-color:${window.parent.stringToPastelColor(appName)};'></span>${appName}`;
				appDiv.setAttribute("onclick", `upddefap('${appName}', '${appDiv.id}')`);
				document.getElementById("defapppack").appendChild(appDiv);
			});
		}

		async function upddefap(appName, div) {
			div = document.getElementById(div);
			div.style.backgroundColor = "grey";
			var response
			const filePath = "appdata/" + appName + ".html";
			try {
				response = await window.parent.fetch(filePath);
				if (!response.ok) {
					// Set background color to red
					div.style.backgroundColor = "red";

					// Check the HTTP status code and throw an error accordingly
					if (response.status === 404) {
						throw new Error("File not found for " + appName);
					} else if (response.status === 403) {
						throw new Error("Forbidden access for " + appName);
					} else {
						throw new Error("Failed to fetch file for " + appName + ". Status: " + response.status);
					}
				}
			} catch (error) {
				// Handle network errors
				if (error instanceof TypeError || error.name === 'FetchError') {
					// Set background color to red or handle as desired
					div.style.backgroundColor = "red";
					console.error("Network error:", error.message);
					// You can also display a message to the user indicating a network error occurred
				} else {
					// Re-throw other errors
					throw error;
				}
			}

			const fileContent = await response.text();

			await window.parent.createFile("Apps", window.parent.toTitleCase(appName), "app", fileContent);
			console.log(appName + " updated successfully.");
			div.style.backgroundColor = "#1f1f1f";
			div.style.color = "#60ff2f";
		}

		function rotateHue(color, degrees) {
			const dummyElement = document.createElement('div');
			dummyElement.style.color = color;
			dummyElement.style.filter = `hue-rotate(${degrees}deg)`;
			document.body.appendChild(dummyElement);
			const rotatedColor = window.getComputedStyle(dummyElement).color;
			document.body.removeChild(dummyElement);
			return rotatedColor;
		}

		function openappinstr(appName, appDetails) {
			const installButton = document.getElementById("installButton");

			installButton.className = 'insbtn';
			let appald = window.parent.getFileNamesByFolder("Apps")
				.then(appald => {
					try {
						const h3 = document.getElementById("installerappname");
						h3.textContent = appName;
						document.getElementById("installerappby").textContent = "" + appDetails.by;
						const p = document.getElementById("installerappdesc");
						const appDescItem = appDetails?.desc || '';
						const appcatitem = appDetails?.cat || '';
						const applditem = appDetails?.ldesc || '';
						const appthitem = appDetails?.th || '';
						const appqtitem = appDetails?.qt || '';

						document.getElementById("apptheme").innerHTML = ((appqtitem) ? appqtitem : appcatitem);
						document.getElementById("apptheme").style.background = ((appthitem) ? appthitem : "#141414");

						p.innerHTML = appDescItem + '<br> <br><b>Description</b> <br>';
						if (applditem !== undefined) {
							p.innerHTML += applditem;
						} else {
							p.innerHTML += `Overview not available yet.`;
						}

						let sourceurl = appDetails.src
						if (sourceurl.startsWith("/Nova-Store")) {
							sourceurl = "Nova Store"
						}

						p.innerHTML += `<br><a class="srca">Hosted on: ` + sourceurl + `
					<br>Version: ` + appDetails.ver + `</a>`;

						p.innerHTML += `<br><button>#` + appcatitem + `</button>`

						document.getElementById('openbtn').style.display = "block"

						function getapnme(x) {
							return x.split('.')[0];
						}

						if (appald.some(app => getapnme(app.name) === appName)) {
							const appflor = appald.find(app => getapnme(app.name) === appName);
							document.getElementById('openbtn').innerText = "Open";
							document.getElementById('openbtn').onclick = async function () {
								window.parent.openfile(appflor.id)
							};
							installButton.textContent = 'Update';
							installButton.style.backgroundColor = "#2f2f2f";

							installButton.onclick = function () {
								installapp(appDetails, appName, this, "full");
							};
						} else {
							installButton.textContent = 'Install';
							installButton.style.backgroundColor = "var(--col-good)";
							installButton.onclick = function () {
								installapp(appDetails, appName, this, "full");
							};

							const openButton = document.getElementById('openbtn');
							openButton.innerText = "Try";
							openButton.onclick = async function () {
								const item = appDetails.src; // Find the correct item
								let prefixurl = "";
								if (!item.startsWith("http")) {
									prefixurl = "https://adthoughtsglobal.github.io/";
								}
								const response = await fetch(prefixurl + item);
								const content = await response.text();
								window.parent.openwindow(appName, content); // Use appName instead of app.name
							};
						}
						document.getElementById("installer").showModal()
					} catch (error) {
						console.error(error);
					};
				});

		}

		// This function updates the button text based on the input content
		function updateButtonText() {
			const input = document.getElementById("fesinp").value.trim();
			const button = document.getElementById("actionButton");
			const currentHtml = button.innerHTML;

			let newHtml;

			if (isValidUrl(input)) {
				newHtml = ' <div class="material-symbols-rounded installbtnicn">download</div>';
			} else if (input.length > 0) {
				newHtml = ' <div class="material-symbols-rounded installbtnicn">search</div>';
			} else {
				newHtml = ' <div class="material-symbols-rounded installbtnicn">download</div>';
			}

			if (currentHtml !== newHtml) {
				button.innerHTML = newHtml;
			}
		}

		// This function checks if a string is a valid URL
		function isValidUrl(string) {
			try {
				new URL(string);
				return true;
			} catch {
				return false;
			}
		}

		// This function handles Enter key press to trigger the search/install action
		function handleEnterKey(event) {
			if (event.key === "Enter") {
				const input = document.getElementById("fesinp").value.trim();
				if (input.length > 0) {
					handleSearchOrInstall(document.getElementById("actionButton"));
				}
			}
		}

		async function handleSearchOrInstall(button) {
			const input = document.getElementById("fesinp").value.trim();
			if (isValidUrl(input)) {
				await installapp({ "src": input }, getAppNameFromUrl(input), button);
			} else {
				searchApps(input);
			}
		}

		function searchApps(query) {
			const resultsDiv = document.getElementById("searchresults");
			resultsDiv.style.display = 'block';
			resultsDiv.innerHTML = "<div class='loader'></div>";
			fetch("https://adthoughtsglobal.github.io/Nova-Store/db/database.json")
				.then(response => response.json())
				.then(data => {
					const results = data.data.filter(app => {
						const appName = app.name; // Directly access the 'name' property
						return appName.toLowerCase().includes(query.toLowerCase());
					});
					displaySearchResults(results);
				})
				.catch(error => {
					console.error("Error fetching app data:", error);
					resultsDiv.innerHTML = "Error loading search results.";
				});
		}

		function displaySearchResults(results) {
			const resultsDiv = document.getElementById("searchresults");
			resultsDiv.innerHTML = "";
			if (results.length === 0) {
				resultsDiv.innerHTML = "<p class='searchnores'>No results found.</p>";
				return;
			}
			results.forEach(app => {
				const appName = app.name; // Directly access the 'name' property
				const appDetails = app; // app is already the flattened details object

				const resultDiv = document.createElement("div");
				resultDiv.className = "resultapp";

				const dataSide = document.createElement("div");
				dataSide.className = "dataside";

				const title = document.createElement("b");
				title.className = "resultapptit";
				title.textContent = appName;

				const description = document.createElement("p");
				const descText = appDetails.desc || "No description available."; // Use 'desc' directly
				description.textContent = descText;

				dataSide.appendChild(title);
				dataSide.appendChild(description);

				const actionSide = document.createElement("div");
				actionSide.className = "actionside";

				const actionButton = document.createElement("button");
				actionButton.className = "chevronbtn";
				actionButton.innerHTML = `<i class="material-symbols-rounded">chevron_forward</i>`;

				resultDiv.setAttribute("onclick", `openappinstr('${appName}', ${JSON.stringify(appDetails)})`);

				actionSide.appendChild(actionButton);

				resultDiv.appendChild(dataSide);
				resultDiv.appendChild(actionSide);

				resultsDiv.appendChild(resultDiv);
			});
		}
	</script>
</body>

</html>